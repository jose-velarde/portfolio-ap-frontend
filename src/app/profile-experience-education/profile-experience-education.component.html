<div class="flex flex-col gap-2 p-3 rounded-lg border border-gray-300">
  <div class="prose-p:my-0 prose-headings:mt-0 max-w-none prose">
    <h2 class="flex justify-between items-center">
      <span>Experience</span>
      <button (click)="setNewExperienceForm()">
        <fa-icon class="text-slate-700" icon="plus"></fa-icon>
      </button>
    </h2>
    <form
      (ngSubmit)="postExperience(experienceForm.value)"
      #experienceForm="ngForm"
      *ngIf="showNewExperienceForm"
    >
      <div class="flex flex-col gap-2">
        <p class="font-bold">Experience: New Experience</p>
        <input
          class="w-full"
          name="position"
          ngModel
          type="text"
          placeholder="Position"
        />
        <input
          class="w-full"
          name="company"
          ngModel
          type="text"
          placeholder="Company"
        />
        <input
          class="w-full"
          name="start_date"
          ngModel
          type="date"
          placeholder="Start Date"
        />
        <input
          class="w-full"
          name="end_date"
          ngModel
          type="date"
          placeholder="End Date"
        />
        <input
          class="w-full"
          name="location"
          ngModel
          type="text"
          placeholder="Location"
        />

        <div class="flex gap-2 mb-2">
          <button
            type="submit"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            New
          </button>
          <button
            (click)="setNewExperienceForm()"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            Cancel
          </button>
        </div>
      </div>
    </form>

    <div class="" *ngIf="!editable">
      <div
        class="flex gap-4 items-center"
        *ngFor="let experience of experiences"
      >
        <div class="flex grow-0 w-24 h-24 bg-slate-500 rounded-full"></div>
        <div class="flex flex-col grow">
          <h3 class="flex justify-between items-center">
            <span>{{ experience.position }}</span>
            <div class="flex gap-3" *ngIf="loggedIn">
              <button (click)="deleteExperience(experience)">
                <fa-icon class="text-slate-700" icon="trash-can"></fa-icon>
              </button>
              <button (click)="setEditable()">
                <fa-icon class="text-slate-700" icon="pencil"></fa-icon>
              </button>
            </div>
          </h3>
          <p class="">{{ experience.company }}</p>
          <p class="text-orange-600">
            {{ experience.start_date | date: 'yyyy-MM':'+180' }} &rarr;
            {{ experience.end_date | date: 'yyyy-MM':'+180' }}
          </p>
          <p class="">{{ experience.location }}</p>
        </div>
      </div>
    </div>
    <div class="" *ngIf="editable">
      <div class="flex flex-col gap-2" *ngFor="let experience of experiences">
        <p class="font-bold">Experience: {{ experience.position }}</p>
        <input class="w-full" [(ngModel)]="experience.position" type="text" />
        <input class="w-full" [(ngModel)]="experience.company" type="text" />
        <input class="w-full" [(ngModel)]="experience.start_date" type="text" />
        <input class="w-full" [(ngModel)]="experience.end_date" type="text" />
        <input class="w-full" [(ngModel)]="experience.location" type="text" />

        <div class="flex gap-2 mb-2">
          <button
            (click)="editExperience(experience)"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            Edit
          </button>
          <button
            (click)="setEditable()"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="prose-p:my-0 prose-headings:mt-0 max-w-none prose">
    <h2 class="flex justify-between items-center">
      <span>Education</span>
      <button (click)="setNewEducationForm()">
        <fa-icon class="text-slate-700" icon="plus"></fa-icon>
      </button>
    </h2>
    <form
      (ngSubmit)="postEducation(educationForm.value)"
      #educationForm="ngForm"
      *ngIf="showNewEducationForm"
    >
      <div class="flex flex-col gap-2">
        <p class="font-bold">Education: New Education</p>
        <input
          class="w-full"
          name="degree"
          ngModel
          type="text"
          placeholder="Degree"
        />
        <input
          class="w-full"
          name="career"
          ngModel
          type="text"
          placeholder="Carrer"
        />
        <input
          class="w-full"
          name="institution"
          ngModel
          type="text"
          placeholder="Institution"
        />
        <input
          class="w-full"
          name="start_date"
          ngModel
          type="date"
          placeholder="Start Date"
        />
        <input
          class="w-full"
          name="end_date"
          ngModel
          type="date"
          placeholder="End Date"
        />
        <input
          class="w-full"
          name="location"
          ngModel
          type="text"
          placeholder="Location"
        />

        <div class="flex gap-2 mb-2">
          <button
            type="submit"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            New
          </button>
          <button
            (click)="setNewEducationForm()"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            Cancel
          </button>
        </div>
      </div>
    </form>
    <div class="" *ngIf="!editable">
      <div class="flex gap-4 items-center" *ngFor="let education of educations">
        <div class="flex grow-0 w-24 h-24 bg-slate-500 rounded-full"></div>
        <div class="flex flex-col grow">
          <h3 class="flex justify-between items-center">
            <span>{{ education.career }}</span>
            <div class="flex gap-3" *ngIf="loggedIn">
              <button (click)="deleteEducation(education)">
                <fa-icon class="text-slate-700" icon="trash-can"></fa-icon>
              </button>
              <button (click)="setEditable()">
                <fa-icon class="text-slate-700" icon="pencil"></fa-icon>
              </button>
            </div>
          </h3>
          <p class="">{{ education.institution }}</p>
          <p class="text-orange-600">
            {{ education.start_date | date: 'yyyy-MM':'+180' }} &rarr;
            {{ education.end_date | date: 'yyyy-MM':'+180' }}
          </p>
          <p class="">{{ education.location }}</p>
        </div>
      </div>
    </div>
    <div class="" *ngIf="editable">
      <div class="flex flex-col gap-2" *ngFor="let education of educations">
        <p class="font-bold">Education: {{ education.degree }}</p>
        <input class="w-full" [(ngModel)]="education.degree" type="text" />
        <input class="w-full" [(ngModel)]="education.career" type="text" />
        <input class="w-full" [(ngModel)]="education.institution" type="text" />
        <input class="w-full" [(ngModel)]="education.start_date" type="date" />
        <input class="w-full" [(ngModel)]="education.end_date" type="date" />
        <input class="w-full" [(ngModel)]="education.location" type="text" />

        <div class="flex gap-2 mb-2">
          <button
            (click)="editEducation(education)"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            Edit
          </button>
          <button
            (click)="setEditable()"
            class="py-2 px-4 text-white bg-slate-500 rounded-sm"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
